{% extends 'base.html' %}

{% block title %}home{% endblock %}
{% block stylesheet %}
<link rel="stylesheet" href="../static/home.css"> {% endblock %}
{% block content %}


<div class="top-container">
    <h1>home</h1>
    {% if current_user.is_authenticated == False %}
    <div>
        <a href="{{ url_for('login') }}">Sign In</a>
        <a href="{{ url_for('register') }}">Register</a>
    </div>
    {% else %}
    <a href="{{ url_for('account') }}">Account</a>
    <a href="{{ url_for('logout') }}">Log out</a>

    {% endif %}

    <div class="bet-container">
        {% if bets_events %}
        <button type="button" class="btn btn-primary ml-auto" data-toggle="collapse" data-target="#recentBets"
            aria-expanded="false">
            Your recent bets <span class="badge badge-light">{{bets_events | count}}</span>
        </button>
        <div class="collapse" id="recentBets">
            <ul id="bet-ul">
                {% for bet in bets_events %}
                <li><a href="/event/{{bet['event'].id}}">${{bet['bet'].amount}} on {{bet['bet'].selection}}
                        ({{bet['event'].home_team}} vs {{bet['event'].away_team}})</a></li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
    </div>

    <div id="balance-info-container">
        {% if current_user.is_authenticated %}
        <button id="reload-balance-btn" data-user={{current_user.id}}>Reload Balance</button>
        {% else %}
        <button id="reload-balance-btn" class="hidden">Reload Balance</button>
        {% endif %}
    </div>

    <div class="event-container">
        <h2 id="event-header">Events</h2>
        <label for="search-events" id="search-events">Search</label>
        <input type="text" id="search-events">
        <label for="completion-filter" class="">Game status</label>
        <select name="completion-filter" id="completion-filter" class="mb-3">
            <option value="incomplete" selected>Incomplete</option>
            <option value="completed">Completed</option>
        </select>
        {% for event in events %}
        <div id="event-list">
            <div class="event-card">
                <a href="/event/{{event.id}}">
                    <p>{{event.title}}</p>
                </a>
                <ul>
                    <li>{{event.home_team}} vs {{event.away_team}}</li>
                    <li>{{event.date}}</li>
                </ul>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
<script src="../static/home.js"></script>
{% endblock %}